<view class="page">
  <view class="page__bd">
    <view class="weui-tab">
      <view class="weui-navbar">
        <block wx:for="{{tabs}}" wx:key="*this">
          <view id="{{index}}" class="weui-navbar__item {{activeIndex == index ? 'weui-bar__item_on' : ''}}" bindtap="tabClick">
            <view class="weui-navbar__title">{{item}}</view>
          </view>
        </block>
        <view class="weui-navbar__slider" style="left: {{sliderLeft}}px; transform: translateX({{sliderOffset}}px); -webkit-transform: translateX({{sliderOffset}}px);"></view>
      </view>
      <!-- 我收到的 -->
      <swiper class="weui-tab__panel" duration="300" bindchange="swiperTab" current="{{activeIndex}}">
        <swiper-item hidden="{{activeIndex != 0}}">
          <view style="height:calc(100vh - 51px);margin-top:51px;overflow:scroll">
            <view class="weui-tab__content">
              <block wx:for="{{receiveList}}" wx:for-index="index" wx:for-item="item">
                <view class="logBox" data-idx="{{index}}" catchtap="toDeta">
                  <view class="info">
                    <view class="avatar">
                      <image src="{{item.avatarUrl}}"></image>
                    </view>
                    <view class="sendDeta">
                      <view class="sender">
                        {{item.sender}}{{item.type===0?'的日报':(item.type===1?' 的周报':'的月报')}}
                      </view>
                      <view class="time">
                        {{item.time}}
                      </view>
                    </view>
                    <view class="more" hover-class="moreClick" data-idx="{{index}}" catchtap="toOperate">
                      <view class="icon iconfont icon-more"></view>
                    </view>
                  </view>
                  <view class="content">
                    <block wx:if="{{item.type===0}}">
                      <view>今日完成工作:{{item.content.todayDone}}</view>
                      <view>今日未完成工作:{{item.content.todayUndone}}</view>
                      <view>需协调工作:{{item.content.todayCoor}}</view>
                    </block>
                    <block wx:elif="{{item.type===1}}">
                      <view>本周完成工作:{{item.content.weekDone}}</view>
                      <view>下周工作计划:{{item.content.weekPlan}}</view>
                      <view>本周工作总结:{{item.content.weekSummary}}</view>
                      <view>需协调帮助:{{item.content.weekCoor}}</view>
                    </block>
                    <block wx:else>
                      <view>本月完成工作:{{item.content.monthDone}}</view>
                      <view>下月工作计划:{{item.content.monthPlan}}</view>
                      <view>本月工作总结:{{item.content.monthSummary}}</view>
                      <view>需协调帮助:{{item.content.monthCoor}}</view>
                    </block>
                  </view>
                </view>
              </block>
            </view>
          </view>
        </swiper-item>
        <!-- 我发出的 -->
        <swiper-item hidden="{{activeIndex != 1}}">
          <view  style="height:calc(100vh - 51px);margin-top:51px;overflow:scroll">
            <view class="weui-tab__content">
              <block wx:for="{{sendList}}">
                <view class="logBox">
                  <view class="info">
                    <view class="avatar">
                      <image src="{{userInfo.avatarUrl}}"></image>
                    </view>
                    <view class="sendDeta">
                      <view class="sender">
                        {{userInfo.nickName}}{{item.type===0?'的日报':(item.type===1?' 的周报':'的月报')}}
                      </view>
                      <view class="time">
                        {{item.time}}
                      </view>
                    </view>
                    <view class="more" hover-class="moreClick" data-idx="{{index}}" catchtap="toOperate">
                      <view class="icon iconfont icon-more"></view>
                    </view>
                  </view>
                  <view class="content">
                    <block wx:if="{{item.type===0}}">
                      <view>今日完成工作:{{item.content.todayDone}}</view>
                      <view>今日未完成工作:{{item.content.todayUndone}}</view>
                      <view>需协调工作:{{item.content.todayCoor}}</view>
                    </block>
                    <block wx:elif="{{item.type===1}}">
                      <view>本周完成工作:{{item.content.weekDone}}</view>
                      <view>下周工作计划:{{item.content.weekPlan}}</view>
                      <view>本周工作总结:{{item.content.weekSummary}}</view>
                      <view>需协调帮助:{{item.content.weekCoor}}</view>
                    </block>
                    <block wx:else>
                      <view>本月完成工作:{{item.content.monthDone}}</view>
                      <view>下月工作计划:{{item.content.monthPlan}}</view>
                      <view>本月工作总结:{{item.content.monthSummary}}</view>
                      <view>需协调帮助:{{item.content.monthCoor}}</view>
                    </block>
                  </view>
                </view>
              </block>
            </view>
          </view>
        </swiper-item>
        <!-- 日志统计 -->
        <swiper-item hidden="{{activeIndex != 2}}">
          <view class="weui-tab__content">
            <scroll-view scroll-y="true" style="height:calc(100vh - 51px);margin-top:51px">
              <view class="pieWrapper">
              <view class="pieTime">{{}}</view>
              <view class="chartsTitle">
                <view>日志类型分布</view>
                <view>个人日志</view>
              </view>
                <canvas canvas-id="pieCanvas" class="canvas" style="height:360px" catchtap="toRefresh"><cover-view class="title">日志分类</cover-view></canvas>
              </view>
            </scroll-view>
          </view>
        </swiper-item>
      </swiper>
    </view>
  </view>
  <!-- 添加日志弹出层背景-->
  <view class="addBg" style="height:{{addbgHeight}}" catchtap="hideadd" catchtouchmove="true">
  </view>
  <!-- 新建操作栏按钮-->
  <view class="addWrapper" wx:if="{{isaddFile}}" catchtouchmove="tapMove" catchtouchend="tapEnd" style="left:{{left}};top:{{top}};bottom:{{bottom}};right:{{right}}">
    <view class="add_group" style="height:{{addwrapper}};display:{{overflow}}">
      <view class="new_file" catchtap="toaddDay">
        <text>日报</text>
        <image src="../../images/logs/day(1).png"></image>
      </view>
      <view class="upload_file" catchtap="toaddWeek">
        <text>周报</text>
        <image src="../../images/logs/week.png"></image>
      </view>
      <view class="upload_file" catchtap="toaddMonth">
        <text>月报</text>
        <image src="../../images/logs/month.png"></image>
      </view>
    </view>
    <view class="add_btn" wx:if="{{isaddFile}}">
      <image style="transform:rotate({{transdeg}})" src="../../images/file/add.png"></image>
    </view>
  </view>
</view>

<view class="layOpen" wx:if="{{isOperate}}" catchtap="toCancel">
  <view class="inner">

    <block wx:if="{{activeIndex===0}}">
      <view class="viewMore" catchtap="toViewAll">查看{{userInfo.nickName}}的所有日志</view>
      <view class="deleteBtn" catchtap="toDelte">删除</view>
      <view class="cancelBtn" catchtap="toCancel">取消</view>
    </block>
    <block wx:elif="{{activeIndex===1}}">
      <view class="withDraw" catchtap="toWithDrow">撤回(两小时内可撤回)</view>
      <view class="deleteBtn" catchtap="toDelte">删除</view>
      <view class="cancelBtn" catchtap="toCancel">取消</view>
    </block>
  </view>
</view>